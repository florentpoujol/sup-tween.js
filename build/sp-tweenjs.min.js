// superpowers-tweenjs v0.1.0 https://github.com/florentpoujol/superpowers-tweenjs
void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var SPTWEEN=SPTWEEN||function(){var t=[];return{REVISION:"1",getAll:function(){return t},removeAll:function(){t=[]},add:function(n){t.push(n)},remove:function(n){var e=t.indexOf(n);-1!==e&&t.splice(e,1)},update:function(n){if(0===t.length)return!1;var e=0;for(n=void 0!==n?n:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();e<t.length;)t[e].update(n)?e++:t.splice(e,1);return!0}}}();SPTWEEN.Tween=function(t){var n=t||{},e={},r={},i=1e3,o=!1,u=0,a=!1,l=!1,s=0,c=null,f=!1,h=0,d=0,p=SPTWEEN.Easing.Linear.None,v=SPTWEEN.Interpolation.Linear,E=[],g=null,w=!1,I=null,y=null,M=null,P=null,m=null;this.test=!1;var T={},O=function(t){if(void 0===n[t]){var e=t.charAt(0).toUpperCase()+t.slice(1),r=n["get"+e],i=n["set"+e];"function"==typeof r&&"function"==typeof i&&(T[t]={getter:r,setter:i})}},S=function(t){return this.test&&console.log("getobjectvalue",t,T[t]),void 0!==T[t]?T[t].getter.call(n):n[t]},N=function(t,e){this.test&&console.log("setobjectvalue",t,e,T[t]),void 0!==T[t]&&(this.test&&console.log("set",t,e),T[t].setter.call(n,e)),n[t]=e};this.from=function(t){return n=t,this},this.to=function(t,n){return void 0!==n&&(i=n),r=t,this},this.duration=function(t){return i=t,this},this.isRelative=function(t){return o=t,this},this.start=function(t){this in SPTWEEN.getAll()||SPTWEEN.add(this),l=!0,w=!1,c=void 0!==t?t:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),c+=s,h=0,this.test&&console.log("start tweener",e,n,r);var i,o,u,a,f,d,p,v=["number","string","object"];T={};for(u in r)if(i=r[u],a=typeof i,null!==i&&-1!==v.indexOf(a))if(O(u),Array.isArray(a)){if(0===i.length)continue;r[u]=[S(u)||0].concat(i),e[u]=S(u)||0}else if("object"===a){void 0===e[u]&&(e[u]={}),o=S(u),void 0===o&&(o={},N(u,o));for(p in i)f=i[p],d=o[p]||0,Array.isArray(f)?(r[u][p]=[d].concat(f),e[u][p]=d):e[u][p]=parseFloat(d)||0}else e[u]=parseFloat(S(u))||0;return this.test&&console.log("start tweener end",e,n,r),this},this.pause=function(){return f?void 0:(f=!0,null!==I&&I.call(n),this)},this.isPaused=function(){return f},this.resume=function(){return f?(f=!1,null!==y&&y.call(n),this):void 0},this.stop=function(){return l?(SPTWEEN.remove(this),l=!1,null!==m&&m.call(n),this.stopChainedTweens(),this):this},this.destroy=function(t){if(l===!0&&(SPTWEEN.remove(this),l=!1),this.stopChainedTweens(),t===!0)for(var i=0,o=E.length;o>i;i++)E[i].destroy(!0);n=null,e=null,r=null,E=null,g=null,I=null,y=null,M=null,P=null,m=null},this.stopChainedTweens=function(){for(var t=0,n=E.length;n>t;t++)E[t].stop()},this.getChainedTweens=function(){return E},this.removeChainedTweens=function(t){if(null!==t||void 0!==t){var n=E.indexOf(t);return-1!==n?(E.splice(n,1),!0):!1}var e=E.length;return E=[],e>0},this.delay=function(t){return s=t,this},this.repeat=function(t){return u=t,this},this.yoyo=function(t){return a=t,this},this.easing=function(t){return p=t,this},this.interpolation=function(t){return v=t,this},this.chain=function(){return E=arguments,this},this.onStart=function(t){return g=t,this},this.onUpdate=function(t){return M=t,this},this.onPause=function(t){return I=t,this},this.onResume=function(t){return y=t,this},this.onComplete=function(t){return P=t,this},this.onStop=function(t){return m=t,this},this.update=function(t){if(this.test&&console.log("update tweener",t),f===!0)return 0===d&&(d=t),!0;if(d>0)return h+=t-d,d=0,!0;if(c>t)return!0;w===!1&&(null!==g&&g.call(n),w=!0);var l=(t-(c+h))/i;l=l>1?1:l;var I,y,m,T,O,V,W,A,b=p(l),C=function(t,n,e){return(o===!0||"string"===e)&&(n=t+parseFloat(n,10)),t+(n-t)*b};this.test&&console.log("update tweener",e,n,r,b,l);for(I in r)if(y=e[I],m=r[I],T=typeof m,this.test&&console.log("update property",I,m,n),Array.isArray(m))n[I]=v(m,b);else if(null!==m&&"object"===T){A=S(I);for(O in m)V=y[O],W=m[O],A[O]=Array.isArray(W)?v(W,b):C(V,W,typeof W),this.test&&console.log("object value",I,O,V,e,W,r);this.test&&console.log("set object value1",I,A,n),N(I,A)}else("number"===T||"string"===T)&&(N(I,C(y,m,T)),this.test&&console.log("num value",I,y,m,b,C(y,m)));if(this.test&&console.log("update tweener 2",n),null!==M&&M.call(n,b),1==l){if(u>0){isFinite(u)&&u--,this.test&&console.log("before repeat",e,n,r,o);for(I in e){if(endValue=r[I],endValueType=typeof endValue,currentValue=S(I),a){if(r[I]=e[I],e[I]=currentValue,null!==endValue&&Array.isArray(endValue)===!1&&"object"===endValueType){e[I]={};for(O in endValue)e[I][O]=currentValue[O]}this.test&&console.log("property after yoyo",I,e[I],n[I],r[I])}else if(o===!0&&"number"===endValueType||"string"===endValueType)e[I]=currentValue;else if(null!==endValue&&Array.isArray(endValue)===!1&&"object"===endValueType)for(O in endValue){var j=typeof endValue[O];(o===!0&&"number"===j||"string"===j)&&(e[I][O]=currentValue[O])}this.test&&console.log("property",I,e[I],n[I],r[I])}return this.test&&console.log("after repeat",e,n,r),a&&(o=!1),c=t+s,h=0,!0}null!==P&&P.call(n);for(var B=0,U=E.length;U>B;B++)E[B].start(t);return!1}return!0}},SPTWEEN.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var n,e=.1,r=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=r/4):n=r*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/r)))},Out:function(t){var n,e=.1,r=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=r/4):n=r*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin(2*(t-n)*Math.PI/r)+1)},InOut:function(t){var n,e=.1,r=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=r/4):n=r*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?-.5*e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/r):e*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-n)*Math.PI/r)*.5+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?.5*t*t*((n+1)*t-n):.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-SPTWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*SPTWEEN.Easing.Bounce.In(2*t):.5*SPTWEEN.Easing.Bounce.Out(2*t-1)+.5}}},SPTWEEN.Interpolation={Linear:function(t,n){var e=t.length-1,r=e*n,i=Math.floor(r),o=SPTWEEN.Interpolation.Utils.Linear;return 0>n?o(t[0],t[1],r):n>1?o(t[e],t[e-1],e-r):o(t[i],t[i+1>e?e:i+1],r-i)},Bezier:function(t,n){var e,r=0,i=t.length-1,o=Math.pow,u=SPTWEEN.Interpolation.Utils.Bernstein;for(e=0;i>=e;e++)r+=o(1-n,i-e)*o(n,e)*t[e]*u(i,e);return r},CatmullRom:function(t,n){var e=t.length-1,r=e*n,i=Math.floor(r),o=SPTWEEN.Interpolation.Utils.CatmullRom;return t[0]===t[e]?(0>n&&(i=Math.floor(r=e*(1+n))),o(t[(i-1+e)%e],t[i],t[(i+1)%e],t[(i+2)%e],r-i)):0>n?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):n>1?t[e]-(o(t[e],t[e],t[e-1],t[e-1],r-e)-t[e]):o(t[i?i-1:0],t[i],t[i+1>e?e:i+1],t[i+2>e?e:i+2],r-i)},Utils:{Linear:function(t,n,e){return(n-t)*e+t},Bernstein:function(t,n){var e=SPTWEEN.Interpolation.Utils.Factorial;return e(t)/e(n)/e(t-n)},Factorial:function(){var t=[1];return function(n){var e,r=1;if(t[n])return t[n];for(e=n;e>1;e--)r*=e;return t[n]=r,r}}(),CatmullRom:function(t,n,e,r,i){var o=.5*(e-t),u=.5*(r-n),a=i*i,l=i*a;return(2*n-2*e+o+u)*l+(-3*n+3*e-2*o-u)*a+o*i+n}}},"undefined"!=typeof module&&module.exports&&(module.exports=SPTWEEN);